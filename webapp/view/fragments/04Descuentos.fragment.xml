<core:FragmentDefinition xmlns="sap.m"
    xmlns:form="sap.ui.layout.form"
    xmlns:unified="sap.ui.unified"
    xmlns:core="sap.ui.core">

    <Table id="idDescuentosTable" items="{path : 'mockdata>/Descuentos' }" noDataText="{i18n>msgnodata}" growing="true" growingTriggerText="{i18n>lblvermas}" visible="{= ${layout>/descuentosadd} === false }" fixedLayout="false" alternateRowColors="true" sticky="HeaderToolbar,ColumnHeaders">
        <headerToolbar>
            <OverflowToolbar>
                <ToolbarSpacer/>
                <Button icon="sap-icon://sys-add" press="onAgregarDescuentoButtonPress" text="{i18n>btnagregar}" type="Emphasized" />

            </OverflowToolbar>
        </headerToolbar>
        <columns>

            <Column width="12rem">
                <header>
                    <Label text="{i18n>lblmotivo}" />
                </header>
            </Column>
            <Column popinDisplay="Inline" minScreenWidth="Tablet" demandPopin="true" hAlign="Center">
                <header>
                    <Label text="{i18n>lblnumcomprobante}"/>
                </header>
            </Column>
            <Column popinDisplay="Inline" minScreenWidth="Tablet" demandPopin="true" hAlign="Center">
                <header>
                    <Label text="{i18n>lblfecha}"/>
                </header>
            </Column>
            <Column popinDisplay="Inline" minScreenWidth="Tablet" demandPopin="true" hAlign="Center">
                <header>
                    <Label text="{i18n>lblimpor}"/>
                </header>
            </Column>
            <Column width="3rem">
                <header/>
            </Column>



        </columns>
        <items>
            <ColumnListItem type="Active" highlight="Information">
                <cells>



                    <Label text="{mockdata>MotivoDesc}"/>
                    <Label text="{mockdata>NComprobante}"/>
                    <Text text="{path : 'mockdata>Fecha' , formatter : '.formatFecha'}"/>
                    <!-- <Label text="{Fecha}" design="Bold"/> -->
                    <Label text="{mockdata>Importe}"/>

                    <!-- <ObjectStatus title="" state="Error" inverted="true" /> -->
                    <HBox >

                        <!-- <Button icon="sap-icon://print" enabled="{= ${PAID_STATUS} === 1 }" press="onButtonPrintPress" /> -->
                        <Button icon="sap-icon://delete" class="sapUiTinyMarginEnd" press="onButtonDeleteDescuentoPressMsg"/>
                        <Button icon="sap-icon://edit" press="onButtonEditaDescuentoPress"/>
                    </HBox>

                </cells>
            </ColumnListItem>
        </items>
    </Table>


    <form:SimpleForm id="idDescuentosSimpleForm" editable="true" layout="ColumnLayout" visible="{layout>/descuentosadd}">
        <form:content>
            <Label text="{i18n>lblmotivo}" required="true" labelFor="idMotivoInput"/>

            <ComboBox id="idMotivoInput" value="{mockdata>/ActiveDescuento/MotivoDesc}" selectedKey="{mockdata>/ActiveDescuento/Motivokey}" selectionChange="onInputDescuentoChange" items="{/MotivoDescSet}">
                <core:Item key="{Codigo}" text="{Descripcion}" />
            </ComboBox>

            <Label text="{i18n>lblnumcomprobante}" required="true" labelFor="idComprobanteInput" />
            <Input id="idComprobanteInput" type="Number" value="{mockdata>/ActiveDescuento/NComprobante}" />

            <Label text="{i18n>lblfecha}" required="true" labelFor="idDomicilioInput" />
            <DatePicker id="idFechaDatePickerFDescuento" displayFormat="dd/MM/YYYY" dateValue="{mockdata>/ActiveDescuento/Fecha}"/>

            <Label text="{i18n>lblimpor}" required="true" labelFor="idImporteInput"/>
            <Input id="idImporteInput" type="Number" value="{mockdata>/ActiveDescuento/Importe}"/>

            <Label text="{i18n>lbldocumentacion}" required="true" labelFor="idDescuentoFileUploader"/>
            <unified:FileUploader id="idDescuentoFileUploader"  change="onAttachmentChange" name="FUDescuento" uploadUrl="/sap/opu/odata/sap/ZGWFI_COBRANZAS_SRV/AttachDocSet" uploadComplete="onUploadComplete" useMultipart="false"  sendXHR="true" buttonText="{i18n>btttnselect}" style="Emphasized"/>


            <!-- <Button icon="sap-icon://attachment" text="{i18n>btnadjunto}" press="onUploadDescuento" /> -->

        </form:content>
    </form:SimpleForm>
    <HBox alignItems="Center" justifyContent="End" class="sapUiSmallMarginEnd sapUiLargeMarginTop" visible="{= ${layout>/descuentosadd} === false }" >

    
            <Button  enabled="{= ${mockdata>/Paso04ImporteDescuentos} > 0}" text="{i18n>btnguardar}" type="Emphasized" icon="sap-icon://save" press="onGuardarButtonDescSavePress" />
    </HBox>


    <HBox alignItems="Center" justifyContent="End" class="sapUiSmallMarginEnd" visible="{layout>/descuentosadd}">

        <!-- <Button text="{i18n>btnadjunto}" icon="sap-icon://attachment" class="sapUiTinyMarginEnd" /> -->
            <Button enabled="{mockdata>/AddButtonActive}" text="{i18n>btnvolver}" type="Emphasized" icon="sap-icon://nav-back" press="onVolverButtonCancelarDescPress" class="sapUiTinyMarginEnd" />
            <Button enabled="{mockdata>/AddButtonActive}" text="{i18n>btnagregar}" type="Emphasized" icon="sap-icon://add" press="onGuardarButtonDescPress" />
    </HBox>
</core:FragmentDefinition>
